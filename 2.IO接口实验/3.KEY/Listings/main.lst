C51 COMPILER V9.57.0.0   MAIN                                                              01/05/2025 16:40:46 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <INTRINS.H>
   3          unsigned char code ShowNum[]={0xa4,0xc0,0xa4,0x99,0xf9,0xc0,0xa4,0x99};//å°†æ—¥æœŸ20241024è½¬ä¸º8ä¸ªåå…­
             -è¿›åˆ¶æ•°å­—è¿›è¡Œç¼–ç 
   4          /*
   5          æ•°ç è¡¨ç¼–ç å¯¹åº”å…³ç³»ï¼š
   6            0: 0xC0
   7            1: 0xF9
   8            2: 0xA4
   9            3: 0xB0
  10            4: 0x99
  11            5: 0x92
  12            6: 0x82
  13            7: 0xF8
  14            8: 0x80
  15            9: 0x90
  16          */
  17          unsigned char code KeyNum[16]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90,0x88,0x83,0xc6,0xa1,0x86,
             -0x8e};//å°†æ—¥æœŸ20241024è½¬ä¸º8ä¸ªåå…­è¿›åˆ¶æ•°å­—è¿›è¡Œç¼–ç 
  18          //0åˆ°9ã€åŠAåˆ°Få¯¹åº”çš„æ•°ç ç®¡ç¼–ç 
  19          //çŸ©é˜µé”®ç›˜å¯¹åº”è¡Œï¼š
  20          
  21          sbit KeyRow1=P1^7;
  22          sbit KeyRow2=P1^6;
  23          sbit KeyRow3=P1^5;
  24          sbit KeyRow4=P1^4;
  25          
  26          void delay_ms(unsigned int time);
  27          void key_scan(void);
  28          void main()
  29          {
  30   1              while(1){
  31   2                              key_scan();
  32   2                              delay_ms(1);
  33   2                      }
  34   1      }
  35          
  36          void delay_ms(unsigned int time){
  37   1                      unsigned int i, j;
  38   1                      for (i = 0; i < time; i++) {
  39   2              for (j = 0; j < 123; j++) {
  40   3                                              //12MHZæ‰§è¡Œä¸€ä¸ªè¯­å¥123æ¬¡å¤§çº¦ä¸º1ms
  41   3                  // ç©ºå¾ªç¯ï¼Œç”¨äºäº§ç”Ÿå»¶æ—¶
  42   3              }
  43   2          }
  44   1      }
  45          void key_scan(void){
  46   1              //æ•°ç ç®¡æ˜¾ç¤ºä¸éœ€è¦è¿›è¡ŒæŒ‰é”®æ¶ˆæŠ–ï¼Œæ£€æµ‹åˆ°å¯¹åº”ç”µå¹³å¯¹æœ€ç»ˆç»“æœæ— å½±å“
  47   1              unsigned char i;
  48   1              P1=0xf0;
  49   1              //0xf0å¯¹åº”1111 0000
  50   1              if((P1&0xf0)!=0xf0){
  51   2                      P3_7=0;
  52   2                      P3_6=0;
C51 COMPILER V9.57.0.0   MAIN                                                              01/05/2025 16:40:46 PAGE 2   

  53   2                      P1=0xfe;
  54   2                      P2=0xff;
  55   2                      P3_7 = 1;
  56   2                      
  57   2              }
  58   1              if((P1&0xf0)!=0xf0)//è‹¥p1ç«¯å£çš„é«˜å››ä½ä¸å…¨ä¸º1ï¼Œå³æœ‰æŒ‰é”®æŒ‰ä¸‹
  59   1              {
  60   2                      P3_7=0;
  61   2                      P3_6=0;//ä¸¤ä¸ªç½®é›¶ï¼Œç”¨æ¥å…³é—­æ§åˆ¶ä¿¡å·
  62   2                      P1=0xfe;//è®¾ç½® P1 ä¸º 1111 1110ï¼Œå‡†å¤‡è¿›è¡Œé”®ç›˜æ‰«æ
  63   2                      P2=0xff;//è®¾ç½® P2 ä¸º 1111 1111ï¼Œæ§åˆ¶æ˜¾ç¤ºä½ç½®ï¼Œffä»£è¡¨8ä¸ªæ•°ç ç®¡å‡è¿›è¡Œç›¸å…³å†…å®¹æ˜¾ç¤
             -º
  64   2                      P3_7=1;
  65   2                      P3_7=0;
  66   2                      for(i=0;i<4;i++)
  67   2                      {
  68   3                              P1=_cror_(0xf7,i);//å¾ªç¯å³ç§»ï¼Œæ‰«æä¸‹ä¸€åˆ— 1111 0111
  69   3                              if(KeyRow1==0)
  70   3                              {
  71   4                                      P2=KeyNum[i];
  72   4                                      P3_6=1;
  73   4                                      P3_6=0;
  74   4                              }
  75   3                              if(KeyRow2==0)
  76   3                              {
  77   4                                      P2=KeyNum[i+4];
  78   4                                      P3_6=1;
  79   4                                      P3_6=0;
  80   4                              }
  81   3                              if(KeyRow3==0)
  82   3                              {
  83   4                                      P2=KeyNum[i+8];
  84   4                                      P3_6=1;
  85   4                                      P3_6=0;
  86   4                              }
  87   3                              if(KeyRow4==0)
  88   3                              {
  89   4                                      P2=KeyNum[i+12];
  90   4                                      P3_6=1;
  91   4                                      P3_6=0;
  92   4                              }
  93   3                      }
  94   2              }
  95   1              
  96   1      }
  97          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    165    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
